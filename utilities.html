<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Utilities</title>
    <style>
        .table {
            margin: 2em;
            border-collapse: collapse;
        }
    </style>
</head>

<body>
    <h1>Utilities Test Screen</h1>

    <div id="table1" class="table"></div>
    <div id="table2" class="table"></div>
    <div id="table3" class="table"></div>

    <script type="module">
        import { exercise, consoleTable, random, webStore } from './utilities.js';

        console.group('\nExercise - positive');
        exercise(true, true);
        exercise(!!{}, true, 'Object');
        exercise(!![], true, 'Array');
        exercise(!!1, true, 'Positive number');
        exercise(!!-1, true, 'Negative number');
        exercise(!!"_", true, 'Non-empty string');
        console.groupEnd();

        console.group('\nExercise - negative');
        exercise(false, true);
        exercise(!!undefined, true, 'undefined');
        exercise(!!null, true, 'null');
        exercise(!!NaN, true, 'NaN');
        exercise(!!0, true, 'Zero');
        exercise(!!"", true, 'Empty string');
        console.groupEnd();

        const testData = [
            [1, 2, 3, 4, 5],
            [
                [1, 2, 3, 4],
                [5, 6, 7, 8],
            ],
            [
                { alpha: 1, beta: 2, gamma: 3, delta: 4 },
                { alpha: 5, beta: 6, gamma: 7, delta: 8 },
            ]
        ];
        const targets = document.querySelectorAll('.table');
        testData.forEach((testDatum, index) => targets[index].innerHTML = consoleTable(testDatum));

        {
            const randTwo = random(2);
            const randTwoValue = randTwo();
            console.group(`\nrandTwo (${randTwoValue})`);
            console.log(`randTwoValue >= 0 = ${randTwoValue >= 0}`);
            console.log(`randTwoValue < 2 = ${randTwoValue < 2}`);
            console.log(`randTwoValue = 0 or 1 = ${[0, 1].includes(randTwoValue)}`);
            console.groupEnd();
        }

        {
            const randTwoFour = random(4, 2);
            const randTwoFourValue = randTwoFour();
            console.group(`\nrandTwoFour (${randTwoFourValue})`);
            console.log(`randTwoFourValue >= 2 = ${randTwoFourValue >= 2}`);
            console.log(`randTwoFourValue < 4 = ${randTwoFourValue < 4}`);
            console.log(`randTwoFourValue = 2 or 3 = ${[2, 3].includes(randTwoFourValue)}`);
            console.groupEnd();
        }

        {
            const randTwoFourToOneDp = random(4, 2, 1);
            const randTwoFourToOneDpValue = randTwoFourToOneDp();
            console.group(`\nrandTwoFourToOneDp (${randTwoFourToOneDpValue})`);
            console.log(`randTwoFourToOneDpValue >= 2 = ${randTwoFourToOneDpValue >= 2}`);
            console.log(`randTwoFourToOneDpValue < 4 = ${randTwoFourToOneDpValue < 4}`);
            console.log(`randTwoFourToOneDpValue = 2 or 3 = ${[2, 3].includes(randTwoFourToOneDpValue)}`);
            console.groupEnd();
        }

        {
            console.group('\nLocal Web Storage');
            const utilityOneLocalStore = webStore('Utility1');
            const utilityTwoLocalStore = webStore('Utility2');

            utilityOneLocalStore.set({ hello: 'World' });
            console.log(utilityOneLocalStore.get());
            utilityTwoLocalStore.set({ hello: 'Utility' });
            console.log(utilityTwoLocalStore.get());
            console.groupEnd();

            setTimeout(() => {
                console.group('\nLocal Web Storage - clean-up');
                utilityOneLocalStore.remove();
                console.log(utilityOneLocalStore.get() === null);
                utilityOneLocalStore.clear();
                console.log(utilityTwoLocalStore.get() === null);
                console.groupEnd();
            }, 2000);
        }

        {
            console.group('\nSession Web Storage');
            const utilityOneSessionStore = webStore('Utility1', webStore.sessionWebStorage);
            const utilityTwoSessionStore = webStore('Utility2', webStore.sessionWebStorage);

            utilityOneSessionStore.set({ hello: 'World' });
            console.log(utilityOneSessionStore.get());
            utilityTwoSessionStore.set({ hello: 'Utility' });
            console.log(utilityTwoSessionStore.get());
            console.groupEnd();

            setTimeout(() => {
                console.group('\nSession Web Storage - clean-up');
                utilityOneSessionStore.remove();
                console.log(utilityOneSessionStore.get() === null);
                utilityOneSessionStore.clear();
                console.log(utilityTwoSessionStore.get() === null);
                console.groupEnd();
            }, 4000);
        }
    </script>
</body>

</html>